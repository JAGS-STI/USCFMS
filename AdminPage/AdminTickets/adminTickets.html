<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tickets | Ususan SCFMS</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="adminTicketsDesign.css" />
    <link rel="stylesheet" href="/USCFMS/AdminPage/Sidebar/sidebarDesign.css" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
    <div>
        <div class="PageSubtitle">
            <p>BARANGAY SOCIAL CONCERNS AND FEEDBACK MANAGEMENT SYSTEM</p>
        </div>
        <div class="PageTitle">
            <h3>Concerns</h3>
        </div>
    </div>

    <div class="sidebar">
        <img src="media/ususan_logo.png">
        <h2>Welcome!</h2>
        <ul class="nav">
            <li>
                <div class="icon">
                    <a href="/USCFMS/AdminPage/AdminHome/adminHome.html">
                        <img src="media/home-1-svgrepo-com (1).svg" />
                        <span>Home</span>
                    </a>
                </div>
            </li>
            <li>
                <div class="icon">
                    <a href="/USCFMS/AdminPage/AdminTickets/adminTickets.html">
                        <img id="ticket" src="media/tickets.svg" />
                        <span>Concern</span>
                    </a>
                </div>
            </li>
            <li>
                <div class="icon">
                    <a href="/USCFMS/AdminPage/AdminComments/adminComments.html">
                        <img src="media/feedback-svgrepo-com.svg" />
                        <span>Comments</span>
                    </a>
                </div>
            </li>
            <li id="about">
                <div class="icon">
                    <a href="/USCFMS/AdminPage/AdminAbout/adminAbout.html">
                        <img src="media/i.svg" />
                        <span>About</span>
                    </a>
                </div>
            </li>

            <li id="logout">
                <div class="icon">
                    <a href="/USCFMS/AdminPage/LoginPage/loginPage.html">
                        <img src="media/logout.svg" />
                        <span>Log out</span>
                    </a>
                </div>
            </li>
        </ul>
    </div>

    <div class="pageContent">
      
        <h2 id="filterTitle">Filter list</h2>
        <div class="filters">
            <div class="concernfield">
            <p id="headField">Concern type:</p>
                <div class="inbox">
                    <select id="concernType" name="concernBox" placeholder="Type Here">
                        <option value="All">All</option>
                        <option value="Road and highways">Road and highways</option>
                        <option value="Residential">Residential</option>
                        <option value="Schools">Schools</option>
                        <option value="Safety and security">Safety and security</option>
                        <option value="Infrastructures and facilities">Infrastructures and facilities</option>
                        <option value="Animal Welfare">Animal Welfare</option>
                        <option value="Others">Others</option>
                    </select>
                </div>
            </div>
            <div class="concernfield">
            <p id="headField">Location:</p>
                <div class="inbox">
                    <select id="concernLocation" name="concernBox" placeholder="Type Here">
                        <option value="All">All</option>
                        <option value="A. Bonifacio Street">A. Bonifacio Street</option>
                        <option value="A. Mabini Street">A. Mabini Street</option>
                        <option value="Kalayaan Street">Kalayaan Street</option>
                        <option value="Bagong Calzada">Bagong Calzada</option>
                        <option value="Camia Street">Camia Street</option>
                        <option value="Colonel C. Flores Street">Colonel C. Flores Street</option>
                        <option value="E. Aguinaldo Street">E. Aguinaldo Street</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="filters">
            <div class="concernfield">
            <p id="headField">Status:</p>
                <div class="inbox">
                    <select id="concernStatus" name="concernStatus" placeholder="Type Here">
                        <option value="All">All</option>
                        <option value="Active">Active</option>
                        <option value="Unread">Unread</option>
                        <option value="Resolved">Resolved</option>
                        <option value="Pending">Pending</option>
                        <option value="Discarded">Discarded</option>
                    </select>
                </div>
            </div>
            <div class="concernfield">
            <p id="headField">Priority:</p>
                <div class="inbox">
                    <select id="concernPriority" name="concernBox" placeholder="Type Here">
                        <option value="All">All</option>
                        <option value="Urgent">Urgent</option>
                        <option value="High">High</option>
                        <option value="Normal">Normal</option>
                        <option value="Low">Low</option>
                    </select>
                </div>
            </div>
        </div>
        <button id="fltrNow">Filter now</button>

        <p id="info">Click on a concern ID to view its contents.</p>
        <img src="media/information-circle-svgrepo-com.svg" />
        
        <div id="dataContainer" >
            <?php include(dirname(__DIR__) . "/php/display_concerns.php"); ?>
        </div>
        

    </div>

    <div class="rightContainer">
        <div class="date">
            <p id="currentDate">September 25, 2023</p>
            <h3 id="currentTime">03:46:00 PM</h3>
            <script src="/USCFMS/time.js"></script>
        </div>
        <?php include(dirname(__DIR__) . "/php/getCountCard.php") ?>

    </div>
    
    <script>
    $(document).ready(function () {
        // Click event for the button
        $('#fltrNow').on('click', function () {
            // Get selected values
            var concernType = $('#concernType').val();
            var concernLocation = $('#concernLocation').val();
            var concernStatus = $('#concernStatus').val();
            var concernPriority = $('#concernPriority').val();

            // Call the function to load data with selected values
            loadData(concernType, concernLocation, concernStatus, concernPriority);
        });

        // Function to load data
        function loadData(concernType, concernLocation, concernStatus, concernPriority) {
            // Use AJAX to load the PHP script with selected values
            $.ajax({
                url: '/USCFMS/AdminPage/php/display_concerns.php',
                type: 'GET',
                data: {
                    concernType: concernType,
                    concernLocation: concernLocation,
                    concernStatus: concernStatus,
                    concernPriority: concernPriority
                },
                success: function (data) {
                    // Update the content of the dataContainer
                    $('#dataContainer').html(data);
                },
                error: function () {
                    console.error('Failed to load data.' . error);
                }
            });
        }
    });
</script>
</body>
</html>
  