<?php 
    require_once "../php/config_session.inc.php";
    require_once "../php/signup_view.inc.php";
    require_once "../php/login_view.inc.php";
?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>User About | Ususan SCFMS</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
    </style>

    <link rel="stylesheet" href="UserConcernDesign.css" />
    <link rel="stylesheet" href="/USCFMS/UserPage/TopMenu/topMenuDesign.css" />
    <script src="/USCFMS/UserPage/java/user.inc.js"></script>
</head>
<body>
    <div class="PageSubtitle">
        <p id="dateTime">ERROR: Date cannot display</p>
        <?php output_account(); ?>
        <script src="/USCFMS/time.js"></script>
    </div>
    <div class="toolBar">
        <a class="PageTitle" href="/USCFMS/UserPage/UserHome/UserHome.html">
            <img src="Media/City_of_Taguig_Seal.png" />
            <img src="Media/ususan_logo.png" />
            <div class="label">
                <p>The Official website of </p>
                <h3>Barangay Ususan</h3>
                <p id="taguig">Taguig City</p>
            </div>
        </a>

        <div class="menuOptions">
            <a href="/USCFMS/UserPage/UserAbout/UserAbout.html">About the Barangay</a>
            <a id="request" href="/USCFMS/UserPage/UserDocRequest/UserDocRequest.html">Request document(s)</a>
            <a href="/USCFMS/UserPage/UserGallery/UserGallery.html">Gallery</a>
            <?php tosubmitBtn(); ?>
            <a id="area" href="/USCFMS/UserPage/UserArea/UserArea.html">Area Guide</a>
            <a href="/USCFMS/UserPage/UserFeedback/UserFeedback.html">Submit Suggestions</a>
        </div>
    </div>

    <div class="aboutBrgy">
        <div class="blur">
            <h1>Do you have any concerns?</h1>
            <p>
                We’d love to hear and assist you to your concern. 
                Kindly fill out the form below to proceed.
            </p>
        </div>
    </div>

    <div class="pageContent">
        
        <form id="concernForm" action="php/process_form.php" method="post" enctype="multipart/form-data">
            <?php userDetail(); ?>
    
            <div class="field2">
                <h1 id="concernTitle">Concern Information</h1>
                <div class="underline"></div>
                <div class="fldConcern">
    
                    <div class="concernfield">
                        <p>Type of concern <span style="color: red">*</span></p>
                        <div class="inbox">
                            <select id="concernBox" name="concernBox" placeholder="Type Here" required >
                                <option value="Road and highways">Road and highways</option>
                                <option value="Residential">Residential</option>
                                <option value="Schools">Schools</option>
                                <option value="Safety and security">Safety and security</option>
                                <option value="Infrastructures and facilities">Infrastructures and facilities</option>
                                <option value="Animal Welfare">Animal Welfare</option>
                                <option value="Others">Others</option>
                            </select>
                        </div>
                    </div>
    
                    <div class="locationfield">
                        <p>Incident location you are concerned <span style="color: red">*</span></p>
                        <div class="inbox">
                            <select id="locationBox" name="locationBox" required >
                                    <option value="A. Bonifacio Street">A. Bonifacio Street</option>
                                    <option value="A. Mabini Street">A. Mabini Street</option>
                                    <option value="Kalayaan Street">Kalayaan Street</option>
                                    <option value="Bagong Calzada">Bagong Calzada</option>
                                    <option value="Camia Street">Camia Street</option>
                                    <option value="Colonel C. Flores Street">Colonel C. Flores Street</option>
                                    <option value="E. Aguinaldo Street">E. Aguinaldo Street</option>
                            </select>
                        </div>
                    </div>
    
                    <div class="uploadfield">
                        <p>Upload photos as proof/evidence <span style="color: red">*</span></p>
                        <div class="inbox" id="invi">
                            <div class="upload">
                                <button for="fileInput" class="upload-button">Upload photos</button>
                                <span class="selected-file">No file selected</span>
                                <input class="file-input" type="file" id="fileInput" name="fileInput[]" accept=".jpeg, .jpg, .png" multiple required>
                                <script>
                                    // JavaScript to display the selected file names
                                    document.getElementById('fileInput').addEventListener('change', function () {
                                        const files = this.files;
                                        const fileNames = Array.from(files).map(file => file.name);
                                        document.querySelector('.selected-file').textContent = fileNames.join(', ') || 'No file selected';
                                    });
                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="descfield">
                        <p>Describe your concern/incident <span style="color: red">*</span></p>
                        <div class="longbox">
                            <textarea id="desc" name="desc" rows="5" cols="100" placeholder="Type here" required></textarea>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="field3">
                <div class="fldVerification">
                    <p id="consent">I consent to the processing of my personal data in accordance with the Republic Act 10173 or also known as the Data Privacy Act of 2012.</p>
                    <input id="check" type="checkbox" required />
                </div>
                <input type="submit" name="submit"  id="submitBtn" class="submit" value="Submit" disabled>
                <script>
                    // Get references to the form and submit button
                    var myForm = document.getElementById("concernForm");
                    var submitBtn = document.getElementById("submitBtn");

                    myForm.addEventListener("submit", function (event) {
                        // Display a confirmation dialog
                        var userConfirmed = window.confirm("Are you sure you want to submit?");

                        // If the user confirms, allow the form submission; otherwise, prevent it
                        if (!userConfirmed) {
                            event.preventDefault();
                        }
                    });
                
                    // Add an event listener to the form to check the form validity
                    myForm.addEventListener("input", function() {
                        // Check if the form is valid
                        var isFormValid = myForm.checkValidity();
                
                        // Update the state of the submit button
                        submitBtn.disabled = !isFormValid;
                    });
                </script>
            </div>
        </form>

        <div class="offset" style="height: 100px; background-color: transparent;"></div>

        <!--bottom-->
        <footer class="copyRight">
            <p>Copyright 2023 | All Rights Reserved | Barangay Government of Ususan</p>
            <a id="contact1" href="/USCFMS/UserPage/UserContact/UserContact.html">Contact Us</a>
            <p id="developedBy">
                Website developed by: <br />
                Gerald Balbon | Sheena Gem Juarbal | Jherico Medina | Arjay Fortuno
            </p>
        </footer>
    </div> 
    <?php login_popup(); ?>
</body>
</html>