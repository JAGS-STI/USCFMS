<?php 
    require_once "../php/config_session.inc.php";
    require_once "../php/signup_view.inc.php";
    require_once "../php/login_view.inc.php";
?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>User About | Ususan SCFMS</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
    </style>

    <link rel="stylesheet" href="UserSurveyDesign.css" />
    <link rel="stylesheet" href="/USCFMS/UserPage/TopMenu/topMenuDesign.css" />
    <script src="/USCFMS/UserPage/java/user.inc.js"></script>
</head>
<body>
    <div class="PageSubtitle">
        <p id="dateTime">ERROR: Date cannot display</p>
        <script src="/USCFMS/time.js"></script>
    </div>
    <div class="toolBar">
        <a class="PageTitle" href="/USCFMS/UserPage/UserHome/UserHome.html">
            <img src="Media/City_of_Taguig_Seal.png" />
            <img src="Media/ususan_logo.png" />
            <div class="label">
                <p>The Official website of </p>
                <h3>Barangay Ususan</h3>
                <p id="taguig">Taguig City</p>
            </div>
        </a>
    </div>

    <div class="aboutBrgy">
        <div class="blur">
            <h1>We’d love your feedback!</h1>
            <p>
            We've resolved the social concern you reported and would love to hear your feedback through this quick survey.
                It'll only take a few minutes of your time.
            </p>
        </div>
    </div>

    <div class="pageContent">
        
        <?php include("php/displayInfo.php");?>

        <div class="offset" style="height: 100px; background-color: transparent;"></div>

        <!--bottom-->
        <footer class="copyRight">
            <p>Copyright 2023 | All Rights Reserved | Barangay Government of Ususan</p>
            <a id="contact1" href="/USCFMS/UserPage/UserContact/UserContact.html">Contact Us</a>
            <p id="developedBy">
                Website developed by: <br />
                Gerald Balbon | Sheena Gem Juarbal | Jherico Medina | Arjay Fortuno
            </p>
        </footer>
    </div>
    <?php login_popup(); ?>
    <script>
        const stars = document.querySelectorAll('.stars img');
        const responsiveRate = document.getElementById('responsiveRate');

        function rateStar(event) {
            const clickedStar = event.target;

            if (clickedStar.tagName === 'IMG') {
                const clickedValue = parseInt(clickedStar.getAttribute('data-value'));

                // Update the star images based on the clicked value
                stars.forEach((star, index) => {
                    if (index < clickedValue) {
                        star.src = 'media/star.png';
                    } else {
                        star.src = 'media/star-svgrepo-com.png';
                    }
                });

                // Update the responsiveRate input value
                responsiveRate.value = clickedValue;
                console.log("responsiveRate: "+responsiveRate.value+"/5");
            }
        }

        stars.forEach((star, index) => {
            // Handle mouseover event to change star images on hover
            star.addEventListener('mouseover', () => {
                if (responsiveRate.value === '') {
                    stars.forEach((s, i) => {
                        if (i <= index) {
                            s.src = 'media/star.png';
                        } else {
                            s.src = 'media/star-svgrepo-com.png';
                        }
                    });
                }
            });

            // Handle mouseout event to reset star images to the selected value
            star.addEventListener('mouseout', () => {
                if (responsiveRate.value === '') {
                    stars.forEach((s, i) => {
                        if (i < parseInt(responsiveRate.value)) {
                            s.src = 'media/star.png';
                        } else {
                            s.src = 'media/star-svgrepo-com.png';
                        }
                    });
                }
            });
        });

        const checkboxesTimely = document.querySelectorAll('.choicesTimely input[type="checkbox"]');
        const choicesNagivation = document.querySelectorAll('.choicesNagivation input[type="checkbox"]');
        const choicesUpdateStat = document.querySelectorAll('.choicesUpdateStat input[type="checkbox"]');
        const choicesTransparency = document.querySelectorAll('.choicesTransparency input[type="checkbox"]');

        checkboxesTimely.forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                if (this.checked) {
                    // If the current checkbox is checked, uncheck the other one
                    checkboxesTimely.forEach(otherCheckbox => {
                        if (otherCheckbox !== this) {
                            otherCheckbox.checked = false;
                        }
                    });
                }
                var anyCheckboxChecked = [...checkboxesTimely].some(cb => cb.checked);

                // Update the required attribute based on the check state
                checkboxesTimely.forEach(cb => {
                    cb.required = !anyCheckboxChecked;
                });
                console.log("timely: "+document.getElementById("timelyY").checked);
            });
        });


        choicesNagivation.forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                if (this.checked) {
                    // If the current checkbox is checked, uncheck the other one
                    choicesNagivation.forEach(otherCheckbox => {
                        if (otherCheckbox !== this) {
                            otherCheckbox.checked = false;
                        }
                    });
                } var anyCheckboxChecked = [...choicesNagivation].some(cb => cb.checked);

                // Update the required attribute based on the check state
                choicesNagivation.forEach(cb => {
                    cb.required = !anyCheckboxChecked;
                });
            });
        });

        choicesUpdateStat.forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                if (this.checked) {
                    // If the current checkbox is checked, uncheck the other one
                    choicesUpdateStat.forEach(otherCheckbox => {
                        if (otherCheckbox !== this) {
                            otherCheckbox.checked = false;
                        }
                    });
                } var anyCheckboxChecked = [...choicesUpdateStat].some(cb => cb.checked);

                // Update the required attribute based on the check state
                choicesUpdateStat.forEach(cb => {
                    cb.required = !anyCheckboxChecked;
                });
            });
        });

        choicesTransparency.forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                if (this.checked) {
                    // If the current checkbox is checked, uncheck the other one
                    choicesTransparency.forEach(otherCheckbox => {
                        if (otherCheckbox !== this) {
                            otherCheckbox.checked = false;
                        }
                    });
                } var anyCheckboxChecked = [...choicesTransparency].some(cb => cb.checked);

                // Update the required attribute based on the check state
                choicesTransparency.forEach(cb => {
                    cb.required = !anyCheckboxChecked;
                });
            });
        });
    </script>
    <script>
        const stars2 = document.querySelectorAll('.stars2 img');
        const overallRate = document.getElementById('overallRate');

        function rateStar2(event) {
            const clickedStar = event.target;

            if (clickedStar.tagName === 'IMG') {
                const clickedValue = parseInt(clickedStar.getAttribute('data-value'));

                // Update the star images based on the clicked value
                stars2.forEach((star, index) => {
                    if (index < clickedValue) {
                        star.src = 'media/star.png';
                    } else {
                        star.src = 'media/star-svgrepo-com.png';
                    }
                });

                // Update the responsiveRate input value
                overallRate.value = clickedValue;
                console.log("overallRate: "+overallRate.value+"/5");
            }
        }

        stars2.forEach((star, index) => {
            // Handle mouseover event to change star images on hover
            star.addEventListener('mouseover', () => {
                if (overallRate.value === '') {
                    stars2.forEach((s, i) => {
                        if (i <= index) {
                            s.src = 'media/star.png';
                        } else {
                            s.src = 'media/star-svgrepo-com.png';
                        }
                    });
                }
            });

            // Handle mouseout event to reset star images to the selected value
            star.addEventListener('mouseout', () => {
                if (overallRate.value === '') {
                    stars2.forEach((s, i) => {
                        if (i < parseInt(overallRate.value)) {
                            s.src = 'media/star.png';
                        } else {
                            s.src = 'media/star-svgrepo-com.png';
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>